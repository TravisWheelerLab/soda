import * as d3 from 'd3';
import * as soda from "@traviswheelerlab/soda"

let gcData = [
40,
40,
40,
60,
60,
60,
60,
40,
40,
40,
60,
60,
40,
60,
60,
40,
40,
40,
60,
60,
60,
40,
20,
60,
60,
40,
40,
40,
60,
40,
60,
60,
40,
60,
60,
20,
40,
80,
60,
40,
40,
40,
60,
60,
60,
40,
60,
60,
60,
60,
40,
60,
40,
40,
60,
60,
60,
40,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
80,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60,
40,
40,
40,
100,
40,
40,
60,
60,
60,
40,
40,
40,
60,
60,
60]

// gcData = gcData.slice(0,20);
const axis = new soda.AxisChart({selector: '#axis-chart'});
let lineChart = new soda.LineChart({selector: '#line-chart', binHeight:100});
let barChart = new soda.BarChart({selector: '#bar-chart', binHeight:100});
let heatmapChart = new soda.HeatmapChart({selector: '#heatmap-chart', binHeight:20});

let zoomController = new soda.ZoomController();
let resizeController = new soda.ResizeController();

zoomController.addComponent(axis);
zoomController.addComponent(lineChart);
zoomController.addComponent(barChart);
zoomController.addComponent(heatmapChart);

resizeController.addComponent(axis);
resizeController.addComponent(lineChart);
resizeController.addComponent(barChart);
resizeController.addComponent(heatmapChart);

window.onresize = () => resizeController.trigger();

let conf: soda.PlotAnnotationConfig = {
    id: `0`,
    x: 0,
    w: 1000,
    y: 0,
    h: 0,
    points: gcData,
}

let ann = [new soda.PlotAnnotation(conf)]
let renderParams: soda.LineChartRenderParams = {
    data: ann,
    queryStart: 0,
    queryEnd: 1000,
    maxY: 1
};

axis.render(renderParams);
lineChart.initialRender(renderParams);
barChart.initialRender(renderParams);
heatmapChart.initialRender(renderParams);
